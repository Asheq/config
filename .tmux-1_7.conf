# Settings for tmux 1.7+
#
# Keymap quick-reference:
#   !       Break the current pane out of the window.
#   ,       Rename the current window.
#   M-Up/Down/Left/Right
#           Resize the current pane by 5 lines/columns.

setw -g automatic-rename
#escape immediately (affects vim in particular)
set-option -sg escape-time 2

bind ] choose-buffer
bind -t vi-copy v begin-selection
bind -t vi-copy V rectangle-toggle
bind -t vi-copy y copy-selection
bind -t vi-copy Escape cancel

bind-key -n M-h if-shell '[[ #{pane_current_command} =~ vim ]]' 'send-keys M-h' 'select-pane -L'
bind-key -n M-j if-shell '[[ #{pane_current_command} =~ vim ]]' 'send-keys M-j' 'select-pane -D'
bind-key -n M-k if-shell '[[ #{pane_current_command} =~ vim ]]' 'send-keys M-k' 'select-pane -U'
bind-key -n M-l if-shell '[[ #{pane_current_command} =~ vim ]]' 'send-keys M-l' 'select-pane -R'

#move between panes
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

#open panes in current directory (work around removed feature in 1.9+)
if-shell "[[ `tmux -V` == *2.* ]] || [[ `tmux -V` == *1.9 ]]" \
    'unbind c; bind c new-window -c "#{pane_current_path}"; unbind "\%"; bind "\%" split-window -c "#{pane_current_path}"; unbind "\""; bind "\"" split-window -h -c "#{pane_current_path}";'

# Required for focus events in tmux 1.9+ http://git.io/2UqSgQ
if-shell "[[ `tmux -V` == *2.* ]] || [[ `tmux -V` == *1.9 ]]" 'set -g focus-events on'
